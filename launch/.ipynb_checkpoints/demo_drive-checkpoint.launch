<?xml version="1.0"?>
<launch>

    <!-- ARGUMENTS -->
    <!-- DS4 ARGUMENTS -->
    <arg name="addr" default="" />
    <arg name="use_standard_msgs" default="false" />
    <arg name="autorepeat_rate" default="0" if="$(arg use_standard_msgs)" />
    <arg name="dof" default="3" />
    <arg name="stamped" default="false" />
    
    <!-- ROSSERIAL ARGUMENTS -->
    <arg name="port" default="/dev/ttyUSB1" />
    <arg name="baud" default="256000" />

    <!-- DS4 -->
    <!-- DS4 DRIVER NODE -->
    <node pkg="ds4_driver" type="ds4_driver_node.py" name="ds4_driver" output="screen" >
      <rosparam command="load" file="$(find ds4_driver)/config/params.yaml" />
      <param name="device_addr" value="$(arg addr)" />
      <param name="use_standard_msgs" value="$(arg use_standard_msgs)" />
      <param name="autorepeat_rate" value="$(arg autorepeat_rate)" if="$(arg use_standard_msgs)" />
    </node>
    
    <!-- DS4 TWIST NODE -->
    <node pkg="ds4_driver" type="ds4_twist_node.py" name="ds4_twist" output="screen" >
      <rosparam command="load" file="$(find ds4_driver)/config/twist_$(arg dof)dof.yaml" />
      <param name="stamped" value="$(arg stamped)" />
    </node>
    
    <!-- DS4 FEEDBACK NODE -->
    <node pkg="ds4_driver" type="ds4_feedback_node.py" name="ds4_feedback" />

    <!-- DS4 STATIC TRANSFORM -->
    <node pkg="tf2_ros" type="static_transform_publisher" name="ds4_to_imu" args="0 0.05 -0.01 -1.5707 0 1.5707 ds4 ds4_imu" />
    
    <!-- ROSSERIAL -->
    <!-- ROSSERIAL PYTHON NODE -->
    <node pkg="rosserial_python" type="serial_node.py" name="rosserial_node">
      <param name="port" value="$(arg port)"/>
      <param name="baud" value="$(arg baud)"/>
    </node>

</launch>
